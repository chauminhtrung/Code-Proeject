<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{/manager/index :: dynamic(~{::body})}">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>

<link rel="stylesheet" href="/CSS/detail.css">
<body class="bg-secondary-soft">
<div class="bg-white p-4 rounded m-4" style="overflow-y: scroll;height: 630px; width: 1200px">
  <div>
    <!-- Tabs navs -->
    <div class="d-flex">
      <ul class="nav nav-tabs" id="ex1-tabs" role="tablist">
        <li class="nav-item" role="presentation">
          <a data-mdb-tab-init
             data-mdb-ripple-init data-mdb-ripple-color="primary"
             class="nav-link active"
             id="ex1-tab-1"
             data-bs-toggle="tab"
             href="#ex1-tabs-1" role="tab"
             aria-controls="ex1-tabs-1"
             aria-selected="true">
            Product List</a>
        </li>
        <li class="nav-item" role="presentation">
          <a data-mdb-tab-init
             data-mdb-ripple-init data-mdb-ripple-color="primary"
             class="nav-link"
             id="ex1-tab-2"
             data-bs-toggle="tab"
             href="#ex1-tabs-2"
             role="tab"
             aria-controls="ex1-tabs-2"
             aria-selected="false">
            Edit Product</a>
        </li>
      </ul>

    </div>
    <!-- Tabs navs -->
    <div class="tab-content" id="ex1-content">
      <div class="tab-pane fade show active" id="ex1-tabs-1" role="tabpanel" aria-labelledby="ex1-tab-1">
        <div class="d-flex position-relative" style="margin-left: 720px; margin-top: -39px;">

          <div class="input-group" style="max-width: 400px">
            <div class="form-outline rounded" data-mdb-input-init>
              <input type="search" id="searchInput" onkeyup="myFunction()" class="form-control"/>
              <label class="form-label" for="searchInput">Tìm kiếm <i class="fa-solid fa-magnifying-glass"></i></label>
            </div>
          </div>
          <div class="ms-3">
            <select class="form-select" aria-label="Default select example">
              <option selected>Bộ lọc</option>
              <option value="1">Giá tiền</option>
              <option value="2">Ngày tạo</option>
              <option value="3">Loại khóa học</option>
            </select>
          </div>
        </div>

        <table class="table mt-3" id="myTable">
          <thead class="bg-transparent">
          <tr class="text-center">
            <th>ID</th>
            <th>Tên khóa học</th>
            <th>Hình ảnh</th>
            <th>Giá</th>
            <th>Ngày tạo</th>
            <th>Loại</th>
            <th>Actions</th>
          </tr>
          </thead>
          <tbody id="productManager">
          <!-- Dữ liệu sẽ được chèn vào đây từ JavaScript -->
          </tbody>
        </table>
      </div>

      <div class="tab-pane fade" id="ex1-tabs-2" role="tabpanel" aria-labelledby="ex1-tab-2">
        <div id="editProductForm"></div>
      </div>
    </div>
  </div>
</div>
<script>
  function myFunction() {
    let input, filter, table, tr, td, i, j, txtValue;
    input = document.getElementById("searchInput");
    filter = input.value.toUpperCase();
    table = document.getElementById("myTable");
    tr = table.getElementsByTagName("tr");

    // Lặp qua tất cả các hàng của bảng
    for (i = 0; i < tr.length; i++) {
      let found = false; // Biến để kiểm tra xem có từ khóa tìm kiếm không
      // Lặp qua tất cả các cột (td) của hàng hiện tại
      for (j = 0; j < tr[i].getElementsByTagName("td").length; j++) {
        td = tr[i].getElementsByTagName("td")[j];
        if (td) {
          txtValue = td.textContent || td.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            found = true; // Đánh dấu là đã tìm thấy từ khóa tìm kiếm
            break; // Ngừng lặp nếu đã tìm thấy
          }
        }
      }
      // Hiển thị hoặc ẩn hàng dựa trên kết quả tìm kiếm
      if (found) {
        tr[i].style.display = ""; // Hiển thị hàng nếu tìm thấy từ khóa
      } else {
        // Ẩn chỉ các hàng trong phần tbody
        if (tr[i].parentNode.tagName.toLowerCase() === 'tbody') {
          tr[i].style.display = "none";
        }
      }
    }
  }
</script>
<script src="/JS/productManager.js"></script>
</body>
</html>